# Документация API: Интеграция с Pixverse

## Общая информация

API предоставляет интерфейс для генерации видео на основе текста или изображения с помощью сервиса Pixverse.

## Методы

### 1. Генерация видео по тексту

**POST** `/text2video`

#### Параметры запроса (JSON):
- `app_bundle_id` (string) — Идентификатор пакета.
- `apphud_user_id` (string) — Идентификатор пользователя Apphud.
- `prompt` (string) — Текстовая подсказка для генерации видео (до 2048 символов).

#### Пример запроса:
```json
{
  "app_bundle_id": "com.example.app",
  "apphud_user_id": "user123",
  "prompt": "A cat"
}
```

#### Пример успешного ответа:
```json
{
  "video_id": "abc123",
  "message": null
}
```

#### Возможные ошибки:
| Код ошибки        | HTTP статус                   | Описание                                             |
|-------------------|-------------------------------|------------------------------------------------------|
| `400011`          | 422 Unprocessable Entity       | Пустой параметр                                     |
| `400012`          | 401 Unauthorized               | Неверный аккаунт                                    |
| `400017`          | 422 Unprocessable Entity       | Неверный параметр                                   |
| `400018 / 400019` | 413 Request Entity Too Large   | Слишком длинный или неверный prompt                 |
| `500043 / 500090` | 402 Payment Required           | Недостаточно кредитов                               |
| `500060`          | 429 Too Many Requests          | Достигнут месячный лимит                            |
| `500044`          | 429 Too Many Requests          | Превышен лимит параллельных задач                   |
| `500054 / 500063` | 403 Forbidden                  | Заблокировано модерацией                            |
| `500100`          | 500 Internal Server Error      | Внутренняя ошибка                                   |

---

### 2. Генерация видео по изображению

**POST** `/image2video`

#### Параметры запроса (multipart/form-data):
- `app_bundle_id` (string) — Идентификатор пакета.
- `apphud_user_id` (string) — Идентификатор пользователя Apphud.
- `prompt` (string) — Подсказка для генерации.
- `image` (file) — Изображение(в форматах .jpg .png .web).

#### Пример успешного ответа:
```json
{
  "video_id": "abc123",
  "message": null
}
```

#### Возможные ошибки:
| Код ошибки  | HTTP статус                   | Описание                                            |
|-------------|-------------------------------|-----------------------------------------------------|
| `400011`    | 422 Unprocessable Entity       | Пустой параметр                                    |
| `400017`    | 422 Unprocessable Entity       | Неверный параметр                                  |
| `400032`    | 422 Unprocessable Entity       | Неверный ID изображения                            |
| `500030`    | 413 Request Entity Too Large   | Изображение слишком большое                        |
| `500032`    | 415 Unsupported Media Type     | Неверный формат изображения                        |
| `500033`    | 422 Unprocessable Entity       | Неверный размер изображения                        |
| `500041`    | 500 Internal Server Error      | Ошибка загрузки изображения                        |
| `500043 / 500090` | 402 Payment Required       | Недостаточно кредитов                              |
| `500060`    | 429 Too Many Requests          | Достигнут месячный лимит                           |
| `500054 / 500063` | 403 Forbidden              | Заблокировано модерацией                           |

---

### 3. Получение статуса генерации

**POST** `/get-status`

#### Параметры запроса (JSON):
- `app_bundle_id` (string) — Идентификатор пакета.
- `apphud_user_id` (string) — Идентификатор пользователя Apphud.
- `video_id` (string) — Идентификатор генерации видео.

#### Пример запроса:
```json
{
  "app_bundle_id": "com.example.app",
  "apphud_user_id": "user123",
  "video_id": "abc123"
}
```

#### Пример успешного ответа:
```json
{
  "status": "success",
  "video_url": "https://pixverse.ai/video/abc123.mp4"
}
```

#### Возможные статусы:
- `generating` — Генерация в процессе.
- `success` — Успешно сгенерировано.
- `error` — Ошибка генерации.

#### Возможные ошибки:
| Код ошибки | HTTP статус                   | Описание                                     |
|------------|-------------------------------|----------------------------------------------|
| `400011`   | 422 Unprocessable Entity       | Пустой параметр                             |
| `400017`   | 422 Unprocessable Entity       | Неверный параметр                           |
| `500008`   | 404 Not Found                  | Видео или данные не найдены                 |
| `500020`   | 403 Forbidden                  | Нет доступа к видео                         |
| `500064`   | 404 Not Found                  | Контент был удалён                          |
| `500069`   | 503 Service Unavailable        | Система перегружена                         |
| `500100`   | 500 Internal Server Error      | Внутренняя ошибка                           |
